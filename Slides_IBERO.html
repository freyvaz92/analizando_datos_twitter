<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Slides_IBERO.utf8</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="xaringan-themer_custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: inverse, center, middle
background-image: url(cover.jpg)
background-size: cover
#ANALIZANDO DATOS DE TWITTER CON 
&lt;img src="logoR.png" width="300px"/&gt;
### Francisco Reyes-V√°zquez
.large[12/03/2019]




---

#Introducci√≥n
.large[Este es un taller dirigido a estudiantes de la Universidad Iberoamericana (IBERO) que est√©n interesados en el an√°lisis de datos aplicado a las **Ciencias de la Comununicaci√≥n**. En el se busca brindar a los participantes herramientas t√©cnicas que los ayude a introducirse en el mundo de la **miner√≠a de datos** para caracterizar fen√≥menos del mundo social.]


.large[El taller esta dise√±ado para ofrecer alternativas en el **manejo y visualizaci√≥n** de grandes **datos** generados por la red social **Twitter**, trav√©s del entorno de **R-Studio**. Adem√°s, se dotar√° a los asistentes de las bases te√≥ricas y pr√°cticas para comprender el **lenguaje de programaci√≥n en R**.]

---

#Contenido

.large[**1. Introducci√≥n a R y R Studio**]

.large[* ¬øQu√© es R y R Studio? 
* Instalar R y R Studio
* El ambiente de R Studio 
* Repositorios, paquetes y funciones]

.large[**2. Analizando datos de Twitter**]

.large[* Flujo de trabajo
* Acerca de **rtweet**
* Importar datos de Twitter
* Trabajar con datos de Twitter]

---

##¬øQu√© es R?

.large[Es un entorno de **software libre** para computaci√≥n **estad√≠stica y gr√°ficos**. R usa el **lenguaje ‚ÄúS‚Äù** que fue creado por **John Chambers** para la d√©cada de **1976**. Este lenguaje tenia como objetivo el an√°lisis de datos y por lo tanto, su intenci√≥n nunca fue ser un lenguaje de programaci√≥n tradicional. Por esta raz√≥n sostiene grandes diferencias con otros lenguajes computacionales.] 

##¬øQu√© es R-Studio?
.large[Es un entorno de desarrollo integrado (**Integrated Development Environment** o IDE por sus siglas en ingl√©s) dedicado a R. Esto quiere decir que es una **aplicaci√≥n inform√°tica** que proporciona servicios integrales para **facilitar** el desarrollo de software.]
---

class: center, middle
.large[**R**]

&lt;img src="r.png" width="100%" align="right" /&gt;

---

class: center, middle
.large[**R Studio**]

&lt;img src="rstudio.png" width="85%" align="center" /&gt;

---

#Instalaci√≥n

.large[Pasos para instalar R:]

.large[1. Ingresar a la liga https://cran.r-project.org/mirrors.html
2. Elegir el espejo CRAN de preferencia
3. Seleccionar el sistema operativo de su maquina
4. Seleccionar la opci√≥n *install R for the first time*]

.large[Pasos para instalar R-Studio:]

.large[1. Ingresar a la liga https://www.rstudio.com/
2. Seleccionar el producto R-Studio
3. Descargar la visi√≥n gratuita para nuestro sistema operativo]

---

#El ambiente de R Studio
&lt;img src="interfaz.png" width="100%" align="center" /&gt;

---

#Repositorios

.large[Un **repositorio** es una red de servidores web en todo el mundo que almacena informaci√≥n. Para R existe el CRAN (*Comprehensive R Archive Network*), este este el lugar donde se guardan las versiones y actualizadas de c√≥digo y documentaci√≥n de R.]

.large[Existen otros repositorios, de entre los que destaca **GitHub** que sirve para alojar proyectos y almacenar el c√≥digo fuente de programas de computadora.]

&amp;nbsp;

.pull-left[&lt;img src="cran.png" width="55%"/&gt;]


.pull-right[&lt;img src="github.png" width="120%"/&gt;]
---
#Paquetes

.large[Un **paquete** es un conjunto de c√≥digos, datos y documentaci√≥n que se agrupa para su f√°cil uso y difusi√≥n. En el caso part√≠cular de R, estos paquetes se encuentran en el CRAN.]

&amp;nbsp;

&gt;install.packages(**"package"**)

&gt;devtools::install_github(**"author/package"**)

&gt;library(**package**)



---

# Funciones

.large[Una **funci√≥n** es un conjunto de declaraciones organizadas que tienen como objetivo la realizaci√≥n de una tarea espec√≠fica. *Grosso modo*, es una serie de instrucciones aplicables a *n* objetos de un conjunto.]


.pull-left[&lt;img src="geom_bar.png" width="80%"/&gt;]

.pull-right[&lt;img src="function.jpg" width="80%"/&gt;]


---

# Tidyverse

.large[Es una colecci√≥n de paquetes dise√±ados en el 2005 por **Hadley Wickham** para la **ciencia de datos**. Todos los paquetes comparten una misma filosof√≠a de dise√±o, gram√°tica y estructuras de datos. ]

&amp;nbsp;

.pull-right[&lt;img src="tidyverse.png" width="180%"/&gt;]

&gt;install.packages(**"tidyverse"**)

&gt;library(**tidyverse**)


---
# Res√∫men de la jerarquia

&amp;nbsp;
&amp;nbsp;

&lt;img src="jerarquia.jpg" width="100%" align="center" /&gt;

---

# Flujo de trabajo: SWD

.large[Al iniciar, las recomendaciones m√°s importantes son:]

&amp;nbsp;

.pull-right[.large[**2) Establecer el DT**] &lt;img src="flujo1.png" width="90%"/&gt;]


.pull-left[.large[**1) Generar un nuevo proyecto**] &lt;img src="flujo2.png" width="150%"/&gt;]

---

# Flujo de trabajo: Scripts

.large[Despues de crear un proyecto, es necesario generar un nuevo script y guardarlo.]

.pull-left[.large[**1) Crear Script **] &lt;img src="flujo3.png" width="60%"/&gt;]

.pull-right[ &lt;img src="flujo4.png" width="130%"/&gt;]


---

&lt;img src="flujo5.png" width="130%"/&gt;

---

# Acerca de *rtweet*


.large[Es un paquete dise√±ado por **Michael W. Kearney (2019)**, que ofrece a los usuarios una gama de funciones dise√±adas para extraer datos de Twitter. Cabe agregar que debe de usarse responsable y estrictamente alineado con los t√©rminos para desarrolladores de Twitter.

(https://developer.twitter.com/en/developer-terms/more-on-restricted-use-cases)] 

&amp;nbsp;

&gt; remotes::install_github(**"ropensci/rtweet"**)

&gt; library(**rtweet**)

---
&amp;nbsp;
.large[En otras versiones de **rtweet**, era necesario darse de alta como **desarrollador** para poder extrar informaci√≥n de **Twitter**. Ahora, con la actualizaci√≥n del 2019 solo es necesario tener una cuenta de **Twitter** activa en nuestro navegador (aunque a√∫n tiene restricciones).]

.pull-left[ &lt;img src="twitter1.png" width="80%"/&gt;]

.pull-right[ &lt;img src="twitter2.png" width="130%"/&gt;]

&amp;nbsp;

&amp;nbsp;

&amp;nbsp;

&amp;nbsp;

&amp;nbsp;

&amp;nbsp;

&amp;nbsp;

S√≠ a√∫n desea solicitar una cuenta de desarrollador de **Twitter**, en la siguiente liga se encuentra un tutorial para darse de alta y crear una APP https://rtweet.info/articles/auth.html.

---

# Antes de iniciar 

.large[Vamos a instalar y llamar todos los paquetes que vamos a usar en este ejercicio. Se usa **`rtweet`** para extraer datos de **Twitter**, **`tidyverse`** para el manejo, transformaci√≥n y repreesentaci√≥n de datos, **`tidytext`** para trabajar con texto,  y finalmente **`lubridate`** para manipular fechas].


```r
#remotes::install_github("ropensci/rtweet")  
library(rtweet)  

library(tidyverse)

library(tidytext)

library(lubridate)
```

---
# Importar datos de Twitter

.large[Usaremos la funci√≥n **`search_tweets()`** para importar los tweets. El parametro **`q`** hace referencia a el t√©rmino de busqueda, **`n`** al n√∫mero de tweets, **`include_rts`** se refiere a la inclusi√≥n de retweets, **`-filter`** para exluir respuestas y **`lang`** para el lenguaje del tweet.]


```r
tweets &lt;- search_tweets(q="avi√≥n presidencial", 
                        n=10000,
                        include_rts=FALSE,
                        `-filter`="replies",
                        lang="es",
                        retryonratelimit = TRUE)
```

El limite son 18,000 cada 15 minutos.
---

&amp;nbsp;

.large[Ahora vamos a visualizarla informaci√≥n del objeto **`tweets`**. Con la funci√≥n **`sample_n()`**, vamos a ver una muestra de 5 tweets aleatorios. Mientras que la funci√≥n **`select()`** nos ayudar√° a seleccionar solo ciertas columnas de los datos.]



```r
tweets%&gt;%
  sample_n(5) %&gt;%
  select(created_at, screen_name, text, favorite_count, retweet_count)
```

```
## # A tibble: 5 x 5
##   created_at          screen_name  text             favorite_count retweet_count
##   &lt;dttm&gt;              &lt;chr&gt;        &lt;chr&gt;                     &lt;int&gt;         &lt;int&gt;
## 1 2020-03-04 03:59:35 svaldesjavi‚Ä¶ @aracelibs @Chu‚Ä¶              1             0
## 2 2020-03-04 17:17:14 CRArciniega  ‚ÄúSe√±or presiden‚Ä¶              3             0
## 3 2020-03-03 22:42:33 jolute0      L√≥pez Obrador a‚Ä¶              0             0
## 4 2020-03-06 17:37:10 mochasmochas @NachoRgz Esper‚Ä¶              0             0
## 5 2020-03-10 20:13:16 jpabloop     Comienzan a ven‚Ä¶              0             0
```

---
&amp;nbsp;

&amp;nbsp;

.large[Vamos a guardar nuestro resultado con con ayuda de la funci√≥n **`write_as_csv`**. Hay que considerar que se puede extraer informaci√≥n de los √∫ltimos **9 d√≠as anteriores a la consulta** y que conforme van pasando los d√≠as, la venta de tiempo-extracci√≥n cambia.]

&gt;write_as_csv(tweets,"tweets_avi√≥n.csv")

&amp;nbsp;

.large[El documento se guardar√° en la direccion de nuestro proyecto. Si queremos importar la base que ya guardamos, solo tenemos que usar la funci√≥n **`read.csv()`** como se muestra a continuaci√≥n:]


```r
tweets2&lt;-read.csv("../Presentaci√≥n_IBERO/tweets_avi√≥n.csv")
```


---
## Explorando los datos


```r
tweets2 %&gt;%
  ts_plot("3 hours")
```

![](Slides_IBERO_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;

Tal vez este comportamiento se relaciona con los temas abordados en las ma√±aneras de AMLO.

---
### Frecuencia
.large[Ahora vamos a extraer la frecuencia de tweets por d√≠a.]


```r
tweets2 %&gt;%
  mutate(day=day(created_at)) %&gt;%
  group_by(day) %&gt;%
  count()
```

```
## # A tibble: 7 x 2
## # Groups:   day [7]
##     day     n
##   &lt;int&gt; &lt;int&gt;
## 1     3  1561
## 2     4  1716
## 3     5   499
## 4     6   412
## 5     7   315
## 6     8   253
## 7     9   234
```

---
### Ubicaci√≥n
.large[Con la siguiente instrucci√≥n se puede determinar cual es la ubicaci√≥n desde la que se emiten m√°s tweets.]

```r
tweets2 %&gt;% 
  filter(!is.na(place_full_name)) %&gt;% 
  count(place_full_name, sort=TRUE) %&gt;% 
  top_n(5)
```

```
## Selecting by n
```

```
## # A tibble: 5 x 2
##   place_full_name                        n
##   &lt;fct&gt;                              &lt;int&gt;
## 1 ""                                  4851
## 2 "Guadalajara, Jalisco"                10
## 3 "Bogot√°, D.C., Colombia"               7
## 4 "Benito Ju√°rez, Distrito Federal"      6
## 5 "Miguel Hidalgo, Distrito Federal"     6
```
---
### Popularidad
.large[Con la siguiente instrucci√≥n se puede ver el tweets m√°s compartido (retweet).]


```r
tweets2%&gt;% 
  arrange(-retweet_count)%&gt;% 
  slice(1)%&gt;% 
  select(created_at, screen_name, text, retweet_count, status_id)
```

```
##            created_at  screen_name
## 1 2020-03-03 16:18:22 ChumelTorres
##                                                                                                                                                                                                                 text
## 1 Esta cuenta se compromete a no hablar m√°s de la mensada esa del avi√≥n presidencial.\n\nSi quiere distraer la atenci√≥n con otra cosa, aqu√≠ ya no va a encontrar eco de su pendejada.\n\nBonito martes chaparritos ‚ô•Ô∏è
##   retweet_count            status_id
## 1          4318 x1234875776048095234
```

---
### Popularidad 2

```r
library(tweetrmd) #devtools::install_github("gadenbuie/tweetrmd")
library(webshot2) #devtools::install_github("rstudio/webshot2")
```


```r
tweet_screenshot(tweet_url("ChumelTorres", "1234875776048095234"))
```

![](Slides_IBERO_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---
### Tweets m√°s queridos

Con la siguiente instrucci√≥n podemos ver el top 5 de los tweets m√°s gustados.


```r
tweets2 %&gt;% 
  arrange(-favorite_count) %&gt;%
  top_n(5, favorite_count) %&gt;% 
  select(created_at, screen_name, text, favorite_count)
```

```
##            created_at     screen_name
## 1 2020-03-03 16:18:22    ChumelTorres
## 2 2020-03-03 17:40:18       GlodeJo07
## 3 2020-03-03 19:05:06         vampipe
## 4 2020-03-03 16:03:21   beltrandelrio
## 5 2020-03-03 16:28:38 laesmeraldasoto
##                                                                                                                                                                                                                 text
## 1 Esta cuenta se compromete a no hablar m√°s de la mensada esa del avi√≥n presidencial.\n\nSi quiere distraer la atenci√≥n con otra cosa, aqu√≠ ya no va a encontrar eco de su pendejada.\n\nBonito martes chaparritos ‚ô•Ô∏è
## 2            Yo ya no hablar√© del avi√≥n presidencial ni de la supuesta rifa porque es una falta de respeto para los mexicanos que habiendo tantos problemas, nuestra atenci√≥n se centre en eso.\n¬øQui√©n mas se suma?
## 3                         Block, Unfollow, Silenciar y Ley del Hielo para quien vuelva a hablar de la rifa del avi√≥n presidencial.\n\nLos distractores que se vayan a su rancho.\n\nEmpezando a partir de... ¬°ahora!
## 4                            Si el no-sorteo del avi√≥n presidencial va a ser en septiembre, ¬øcu√°l era la prisa de empezar a vender al p√∫blico los cachitos justamente el 9 de marzo, d√≠a del paro #UnDiaSinNosotras?
## 5                             Buenos d√≠as. ¬øYa les dijeron que nuestro querid√≠simo @lopezobrador_ va a iniciar la venta de boletos para la rifa del avi√≥n presidencial EL MISMO D√çA QUE LAS MUJERES HAREMOS EL PARO?
##   favorite_count
## 1          38105
## 2          20738
## 3           8568
## 4           7070
## 5           6913
```

---

### Cuentas m√°s activas

Con la siguiente instrucci√≥n podemos ver el top 5 de las cuentas que emitieron m√°s tweets.


```r
tweets2 %&gt;% 
  count(screen_name, sort = TRUE) %&gt;%
  top_n(5) %&gt;%
  mutate(screen_name = paste0("@", screen_name))
```

```
## Selecting by n
```

```
## # A tibble: 7 x 2
##   screen_name          n
##   &lt;chr&gt;            &lt;int&gt;
## 1 @lasillarota        18
## 2 @_VicenteSerrano    14
## 3 @ContraReplicaMX    13
## 4 @espaciopublico     11
## 5 @NTelevisa_com      11
## 6 @Radio_Formula      11
## 7 @Reforma            11
```

---

### Emojis usados

Con la siguiente instrucci√≥n podemos ver el top 5 de los emojis m√°s usados en los tweets


```r
library(emo)  #devtools::install_github("hadley/emo")
tweets2 %&gt;%
  mutate(emoji=ji_extract_all(text)) %&gt;%
  unnest(cols=c(emoji)) %&gt;%
  count(emoji, sort = TRUE) %&gt;%
  top_n(5)
```

```
## # A tibble: 5 x 2
##   emoji     n
##   &lt;chr&gt; &lt;int&gt;
## 1 üòÇ      170
## 2 ‚úàÔ∏è       73
## 3 ü§£       71
## 4 ü§î       65
## 5 üá≤üáΩ       51
```

---

### Frecuencia de las palabras 

Vamos a dividir los tweets por palabra y estimar el n√∫mero de veces que fueron usadas.


```r
tweets2 %&gt;%
  mutate(text = str_remove_all(text, "&amp;amp;|&amp;lt;|&amp;gt;"),
         text = str_remove_all(text, "\\s?(f|ht)(tp)(s?)(://)([^\\.]*)[\\.|/](\\S*)")) %&gt;% 
  filter(str_detect(text,"[^\x27]"))%&gt;%
  unnest_tokens(word, text, token = "words")%&gt;%
  count(word, sort = TRUE)%&gt;%
  top_n(5)
```

```
## Selecting by n
```

```
## # A tibble: 5 x 2
##   word             n
##   &lt;chr&gt;        &lt;int&gt;
## 1 de            7639
## 2 el            5887
## 3 la            5051
## 4 presidencial  4676
## 5 avi√≥n         4608
```
---
Sin embargo, hay muchas palabras que no aportan. En el mundo del *Text Mining* estas palabras son denominadas palabras vac√≠as, pueden ser pronombres, art√≠culos, conectores o nombres personales que com√∫nmente se usan en el lenguaje. Con ayuda del paquete **`tm`** vamos a quitarlas para ver la frecuencia real. La funci√≥n **`stopwords`** nos da una lista de dichas palabras.


```r
library(tm) #install.packages("tm")
#Identificar las palabras que no aportan
stopwords2&lt;-stopwords("spanish")
stopwords2&lt;-data.frame(stopwords2)

stopwords2%&gt;%   #Muestra de 5 
  top_n(10)
```

```
##    stopwords2
## 1           y
## 2          ya
## 3        unos
## 4          yo
## 5    vosotros
## 6    vosotras
## 7     vuestro
## 8     vuestra
## 9    vuestros
## 10   vuestras
```


---
.large[Vamos a hacer el mismo procedimiento, pero ahora dejando solo las palabras con significado y filtrando otros tantos signos. Para ello vamos a usar la funci√≥n **`filter()`** combinada con otras como **`str_detect()`**]


```r
words &lt;- tweets2 %&gt;%
  mutate(text = str_remove_all(text, "&amp;amp;|&amp;lt;|&amp;gt;"),
         text = str_remove_all(text, "\\s?(f|ht)(tp)(s?)(://)([^\\.]*)[\\.|/](\\S*)")) %&gt;% 
  filter(str_detect(text,"[^\x27]"))%&gt;%
  unnest_tokens(word, text, token = "words")%&gt;%
  filter(!word %in% stopwords2$stopwords2,
         !word %in% str_remove_all(stopwords2$stopwords2, "'"),
         str_detect(word, "[a-z]"),
         !str_detect(word, "^#"),         
         !str_detect(word, "@\\S+")) %&gt;%
  count(word, sort = TRUE)
```
---
.large[Finalmente, se grafica la frecuencia en una nube de palabras con ayuda del paquete **`wordcloud`**.]


```r
library(wordcloud) #install.packages("wordcloud")
words %&gt;% 
  with(wordcloud(word, n, random.order = FALSE, 
                 max.words = 100, colors = "#F29545"))
```

![](Slides_IBERO_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---

### An√°lisis de Sentimiento

.large[Cuando los lectores humanos se acercan a un texto, usamos nuestra comprensi√≥n para identificar la intenci√≥n emocional de las palabras para inferir si una secci√≥n del texto es positiva o negativa, o tal vez se caracteriza por alguna otra emoci√≥n m√°s matizada como la sorpresa o el asco. Podemos usar las herramientas de miner√≠a de texto para abordar el contenido emocional del texto mediante programaci√≥n.]

.large[**An√°lisis de Sentimientos (SA)** es la herramienta de **clasificaci√≥n de texto** m√°s com√∫n. Por medio de un algoritmo se analiza un mensaje entrante y se determina si el sentimiento subyacente es **positivo, negativo o neutral**. Puede ingresar una oraci√≥n de su elecci√≥n y medir el sentimiento.]

.large[En R se usa el siguiente paquete:]
&gt;install.packages("SentimentAnalysis")

---

### Un ejemplo b√°sico

Con la funci√≥n **`analyzeSentimen`** se puede determinar la polaridad de una oraci√≥n. En apariencia, el texto parece ser una oraci√≥n positiva. Vamos a comprobarlo y poner el resultado en un objeto llamado **`sentiment`**.


```r
library(SentimentAnalysis)
#Clasificar la siguiente frase
sentiment &lt;- analyzeSentiment("Yeah, this was a great soccer game of the mexican team!")
#Ver la puntuaci√≥n del sentimiento
sentiment[c(2,8,12)]
```

```
##   SentimentGI SentimentLM SentimentQDAP
## 1   0.3333333   0.1666667     0.1666667
```

```r
#Visualizar su polaridad
convertToDirection(sentiment[c(2,8,12)])
```

```
##   SentimentGI SentimentLM SentimentQDAP
## 1    positive    positive      positive
```

---
### Otro ejemplo

.large[Ahora vamos a crear una lista de oraciones.]


```r
documents &lt;- c("Wow, I really like the new light sabers!",
               "That book was excellent.",
               "R is a fantastic language.",
               "The service in this restaurant was miserable.",
               "This is neither positive or negative.",
               "The waiter forget about my a dessert, what a poor service!")

#Clasificar las oraciones
sentiment&lt;-analyzeSentiment(documents)
```


---


```r
#Visualizar su puntuaci√≥n
sentiment[c(2,8,12)]
```

```
##   SentimentGI SentimentLM SentimentQDAP
## 1   0.3333333         0.0     0.3333333
## 2   0.5000000         0.5     0.5000000
## 3   0.5000000         0.5     0.5000000
## 4  -0.6666667         0.0    -0.3333333
## 5   0.0000000         0.0     0.0000000
## 6  -0.6000000        -0.2    -0.4000000
```

```r
#Visualizar su polaridad
convertToDirection(sentiment[c(2,8,12)])
```

```
##   SentimentGI SentimentLM SentimentQDAP
## 1    positive     neutral      positive
## 2    positive    positive      positive
## 3    positive    positive      positive
## 4    negative     neutral      negative
## 5     neutral     neutral       neutral
## 6    negative    negative      negative
```

---

### An√°lisis de Sentimiento con tweets

.large[Primero vamos a descargar los datos de la aplicaci√≥n, guardarlos e importalos.]

.large[Extraer tweets en ingl√©s.] 
&gt;tweets_trump&lt;- search_tweets(q="Trump", 
                        n=500,
                        include_rts=FALSE,
                        `-filter`="replies",
                        lang="en")

.large[Guardar los tweets.]
&gt;write_as_csv(tweets_trump,"tweets_trump.csv")


```r
#Abrir los datos guardados
tweets_trump&lt;-read.csv("../Presentaci√≥n_IBERO/tweets_trump.csv") #la direcci√≥n cambia
```

---

&amp;nbsp;


.large[Despu√©s vamos a crear nuestra propia funci√≥n para limpiar el texto y aplicarla a nuestros tweets. ]


```r
#Funci√≥n
clean.data&lt;-function(text){
  text=gsub("(RT|VIA)((?:\\W*@\\w+)+)","",text)#Eliminar re-tweets
  text=gsub("@\\w+","",text)    #Eliminar @
  text=gsub("[[:punct:]]","",text) #Eliminar signos de puntuaci√≥n
  text=gsub("[[:digit:]]","",text) #Eliminar digitos del 0 al 9
  text=gsub("http\\w+","",text)    #Eliminar html
  text=gsub("[\t]{2,}","",text)    #Eliminar tabulaciones
  text=gsub("^\\s+|\\s+$","",text) } #Eliminar espacios

#Limpiar
text&lt;-clean.data(tweets_trump$text)

#Clasificar sentimientos
sentiment_trump&lt;-analyzeSentiment(text)
```

---
.large[Ahora vamos a claisificar el texto y ver cuantos resultaron ser positivos y negativos.]


```r
#Ver cuantos son positivos y cuantos negativos en cada diccionario
table(convertToBinaryResponse(sentiment_trump$SentimentGI))
```

```
## 
## negative positive 
##      136      364
```

```r
table(convertToBinaryResponse(sentiment_trump$SentimentLM))
```

```
## 
## negative positive 
##      219      281
```

```r
table(convertToBinaryResponse(sentiment_trump$SentimentQDAP))
```

```
## 
## negative positive 
##       60      440
```

---
.large[Me voy a quedar con la clasificaci√≥n **GI** y voy a graficarla. Esta figura nos dira como se comport√≥ el sentimiento de los tweets durante el periodo de tiempo determinado.]


```r
plot(sentiment_trump$SentimentGI,type = "line")
```

```
## Warning in plot.xy(xy, type, ...): plot type 'line' will be truncated to first
## character
```

![](Slides_IBERO_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;

.large[El resultado no es muy intuitivo as√≠ que vamos a crear un promedio m√≥vil para suavizar esa l√≠nea. Tambi√©n necesitamos crear un id que controle el tiempo.]


```r
library(zoo) #install.packages("zoo")
```

```
## 
## Attaching package: 'zoo'
```

```
## The following objects are masked from 'package:base':
## 
##     as.Date, as.Date.numeric
```

```r
#Crear promedio m√≥vil
sentiment_trump$mean&lt;-rollmean(sentiment_trump[,2],10,fill = NA) 

#Crear id
sentiment_trump$id&lt;-seq(1,500)
```

---
.large[Finalmente, vamos a graficar la linea original y la linea suavizada del comportamiento del sentimiento. Utilizaremos el **sentimenTGI** y la **mean**, para igresarlas a un gr√°fico realizado con el paquete **`ggplot2`**. Entonces, la esta figura nos describe el sentimiento de los tweets que contienen la palabra **Trump** en 36 segundos transcurridos entre la 1:36:43 y 1:37:19 del 10 de marzo del 2020.]


```r
ggplot(sentiment_trump)+
  geom_line(aes(x=id,y=SentimentGI),color="gray70")+
  geom_line(aes(x=id,y=mean),color="salmon")
```

![](Slides_IBERO_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;

---

&amp;nbsp;

&amp;nbsp;

&amp;nbsp;

# GRACIAS POR SU ATENCI√ìN

Mis redes:

https://www.facebook.com/freyvaz92

https://twitter.com/freyvaz92

https://rparaempezar.netlify.com/
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/remark/0.14.0/remark.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
